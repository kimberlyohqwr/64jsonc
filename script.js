/**
 * jasonpark - Jason Park
 * @version v1.0.0
 * @link http://jasonpark.me/
 * @license ISC
 */
"use strict";function _toArray(e){return Array.isArray(e)?e:Array.from(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}var _slicedToArray=function(){function e(e,r){var t=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(document).ready(function(){var e=$(".window"),r=$("#directory"),t=$("#browser"),a=$("#terminal"),n=e.find(".toolbar"),o=n.find(".button-container"),i=t.find(".iframe"),s=t.find(".addressbar"),c=$("body"),l=$(".clock"),d=$("a"),u=2,f=function(r){window.location.hash=r.data("last-hash"),e.removeClass("focus"),r.removeClass("minimize"),r.addClass("focus"),r.css("z-index",u++)},v=function(){var r=window.location.hash,t=$(r);if(t.hasClass("window","open")){var a=t.data("last-hash");if(a&&a!==r)return void(window.location.hash=a)}var n=r;if(/^#?$/.test(n))e.removeClass("focus");else{$("a[href^='"+n+"-']").removeClass("active"),$("[id^='"+n.substring(1)+"-']").removeClass("open");for(var o=[n];;){var c=n.lastIndexOf("-");if(!~c)break;n=n.substring(0,c),o.unshift(n)}var l=$(n);l.data("last-hash",r),f(l);for(var d=null,u=0;u<o.length;u++){var v=o[u],h=$(v),m=$("a[href='"+v+"']");if(m.length&&(d=m.first()),u>0){var p=o[u-1];$("a[href^='"+p+"-']").removeClass("active"),$("[id^='"+p.substring(1)+"-']").removeClass("open")}m.addClass("active"),h.addClass("open")}var y=l.find(".tab-container");if(y.length)if(t.length)t[0].click();else{var b=$('<a class="tab open active"></a>');b.attr("id",r.substring(1)),b.attr("href",r);var w=d.data("url");b.data({url:w});var k=$('<div class="icon"></div>'),g=$('<div class="name"></div>'),C=$('<a class="close" href="#"></a>');k.css("background-image","url("+d.data("image")+")"),g.text(d.data("name")),C.attr("href","#"),C.click(function(e){e.preventDefault();var r=b.hasClass("open"),t=b.prev()[0]||b.next()[0];if(b.remove(),r)if(t)t.click();else{var a=l.find(".button-close");_slicedToArray(a,1)[0].click()}}),C.mousedown(function(e){e.stopPropagation()}),b.append(k),b.append(g),b.append(C),b.click(function(){i.attr("src")!==w&&i.attr("src",w),s.find(".url").text(w)}),b.click(),y.append(b)}else{var x=l.find(".title-container");x.empty(),x.append(d.children().clone())}}};window.setTimeout(v,0),$(window).on("hashchange",v),o.find(".button-close").click(function(e){var r=$(this).parents(".window"),t=r.attr("id");switch($("a[href='#"+t+"']").removeClass("active"),r.removeClass("open"),r.data("last-hash",null),r.attr("id")){case"terminal":N();break;case"browser":r.find(".tab-container").empty(),i.attr("src",null),s.find(".url").text(null)}}),o.find(".button-minimize").click(function(e){$(this).parents(".window").addClass("minimize")}),o.find(".button-maximize").click(function(e){e.preventDefault(),$(this).parents(".window").toggleClass("maximize")}),s.find(".button-refresh").click(function(e){e.preventDefault(),i.attr("src",i.attr("src"))}),s.find(".button-new").click(function(e){e.preventDefault(),window.open(i.attr("src"))}),$(".desktop").mousedown(function(){window.location.hash="#",e.removeClass("focus")}),e.mousedown(function(e){e.stopPropagation(),f($(this))});var h=function(e){var t=r.find(".panel.open .directory.active").last();switch(e.keyCode){case 38:var a=t.prev(),n=_slicedToArray(a,1)[0];n&&n.click();break;case 40:var o=t.next(),i=_slicedToArray(o,1)[0];i&&i.click();break;case 37:var s=t.parents(".panel-container").prev().find(".panel.open .directory.active"),c=_slicedToArray(s,1)[0];c&&c.click();break;case 39:var l=t.parents(".panel-container").next().find(".panel.open .directory").first(),d=_slicedToArray(l,1)[0];d&&d.click()}},m={users:{jason:{desktop:{}}}},p=[];$("*").each(function(){var e=this.id;e&&p.push(e)});var y=!0,b=!1,w=void 0;try{for(var k,g=p[Symbol.iterator]();!(y=(k=g.next()).done);y=!0){var C=k.value,x=m.users.jason.desktop,A=C.split("-"),j=!0,_=!1,T=void 0;try{for(var z,I=A[Symbol.iterator]();!(j=(z=I.next()).done);j=!0){var S=z.value;x[S]||(x[S]={}),x=x[S]}}catch(e){_=!0,T=e}finally{try{!j&&I.return&&I.return()}finally{if(_)throw T}}}}catch(e){b=!0,w=e}finally{try{!y&&g.return&&g.return()}finally{if(b)throw w}}var D=null;$.get("/js/script.js",function(e){return D=e},"text");var O=null,P=[],X=0,Y=null,M=null,E=null,N=function(){O=["users","jason","desktop"],Y=!1,V(),W(!0)};window.setTimeout(N,0);var V=function(){M=!1,E=0},W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=a.find(".content");e&&t.empty();var n=$('<div class="line">');if(r){var o=[].concat(_toConsumableArray(O));"users"===o[0]&&"jason"===o[1]&&o.splice(0,2,"~");var i=o.join("/")||"/";n.append("jason@world:"+i+"$ ")}return a.find(".cursor").removeClass("cursor"),n.append('<div class="letter cursor">'),t.append(n),n},J=function(e){var r=e?e.split("/"):[],t=[].concat(_toConsumableArray(O));""===r[0]?t=[]:"~"===r[0]&&(t=["users","jason"]);var a=!0,n=!1,o=void 0;try{for(var i,s=r[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;switch(c){case"":case".":break;case"..":t.pop();break;default:t.push(c)}}}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return t},K=function(e){var r=m,t=!0,a=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)r=r[o.value]}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return r},F=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Array.isArray(e)||(e=[e]);var t=a.find(".content");e.forEach(function(e){var a=$('<div class="line">');a.html(e),r&&a.addClass("word-break"),t.append(a)})},H=function(e){var r=a.find(".cursor");if(L(r),void 0!==e){var t=Array.from(e),n=!0,o=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;"\n"===l?(W(!1,!1),r=a.find(".cursor")):r.before('<div class="letter">'+l+"</div>")}}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}}},L=function(e){e.prev().after(e)},q=function(e){var r=_toArray(e.split(/\s+/)),t=r[0],n=r.slice(1);switch(t){case"":break;case"help":F([" help            show all the possible commands"," whoami          display information about jason"," cd [dir]        change the working directory"," ls [dir]        list directory contents"," pwd             return the working directory"," open [files]    open the files"," clear           clear the terminal screen"," exit            close the terminal window"," hackertyper     ?????"]);break;case"whoami":F(["<b>Jinseo Jason Park</b>:","I'm a web developer, hackathoner, and traveler.","I prefer leading a busy life, but also love to waste time having miscellaneous thoughts. Currently I am a highschool senior in Kansas and a remote working developer. During the break, I work for my company on site either in Lyon, France or in Seoul, Korea; and enjoy traveling the world. "],!0);break;case"cd":var o=n.shift(),i=J(o),s=K(i);if(void 0===s){F("-bash: "+t+": "+o+": No such file or directory");break}if(0===Object.keys(s).length){F("-bash: "+t+": "+o+": Not a directory");break}O=[].concat(_toConsumableArray(i));break;case"ls":var c=n.shift(),l=J(c),d=K(l);if(void 0===d){F("-bash: "+t+": "+c+": No such file or directory");break}if(0===Object.keys(d).length){F(l.pop());break}F(Object.keys(d));break;case"pwd":F("/"+O.join("/"));break;case"open":var u=0,f=!0,v=!1,h=void 0;try{for(var m,p=n[Symbol.iterator]();!(f=(m=p.next()).done);f=!0){(function(){var e=m.value,r=J(e);if(void 0===K(r))return F("The file /"+r.join("/")+" does not exist."),"continue";"users"===r[0]&&"jason"===r[1]&&"desktop"===r[2]&&r.splice(0,3);var a="#"+r.join("-");if("#"===a||!$(a).length)return F("-bash: "+t+": "+e+": Permission Denied"),"continue";window.setTimeout(function(){window.location.hash=a},u+=200)})()}}catch(e){v=!0,h=e}finally{try{!f&&p.return&&p.return()}finally{if(v)throw h}}break;case"clear":return void W(!0);case"exit":var y=a.find(".button-close");return void _slicedToArray(y,1)[0].click();case"hackertyper":if(D)return M=!0,void W(!0,!1);F("Error occurred while loading source code.");break;default:F("-bash: "+t+": command not found")}W();var b=a.find(".cursor");_slicedToArray(b,1)[0].scrollIntoView()},B=function(e){var r=e.keyCode;switch(r){case 8:case 9:case 13:case 27:case 37:case 38:case 39:case 40:e.preventDefault()}if(!M||27===r){var t=a.find(".cursor"),n=t.prev(".letter"),o=t.next(".letter"),i=t.parents(".line");switch(r){case 8:n.length&&(n.remove(),L(t));break;case 9:if(!o.length){var s=i.children(".letter").text().split(/\s+/).pop(),c=s.lastIndexOf("/"),l=s.substring(0,c+1),d=s.substring(c+1),u=J(l),f=K(u);if(f){var v=Object.keys(f).filter(function(e){return e.startsWith(d)});if(1===v.length){var h=v[0].substring(d.length);H(h)}else if(v.length>1){if(Y){t.detach(),i.before(i.clone());var m=!0,p=!1,y=void 0;try{for(var b,w=v[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var k=b.value;i.before('<div class="line">'+k+"</div>")}}catch(e){p=!0,y=e}finally{try{!m&&w.return&&w.return()}finally{if(p)throw y}}t.appendTo(i)}Y=!0}}}break;case 13:var g=i.children(".letter").text();P.push(g),X=P.length,q(g);break;case 27:V(),W();break;case 37:n.length&&(n.addClass("cursor"),t.removeClass("cursor"));break;case 38:if(X>0){var $=P[--X];t.detach(),i.find(".letter").remove(),i.append(t),H($)}break;case 39:o.length&&(o.addClass("cursor"),t.removeClass("cursor"));break;case 40:if(X<P.length){var C=P[++X];t.detach(),i.find(".letter").remove(),i.append(t),H(C)}}9!==r&&(Y=!1),_slicedToArray(t,1)[0].scrollIntoView()}},G=function(e){var r=e.charCode||e.keyCode;if(3===r)V(),W();else if(r>=32)if(M){var t=1+(8*Math.random()|0),n=D.substr(E,t);n||(V(),W()),E+=t,H(n)}else{var o=String.fromCharCode(r);H(o)}var i=a.find(".cursor");_slicedToArray(i,1)[0].scrollIntoView()};$(document).keydown(function(e){r.hasClass("focus")?h(e):a.hasClass("focus")&&B(e)}),$(document).keypress(function(e){a.hasClass("focus")&&G(e)}),e.each(function(e){var r=20+40*e,t=20+40*e;$(this).css({top:r,left:t})});var Q=null,R={},U={};n.mousedown(function(e){1===e.which&&((Q=$(this).parents(".window")).hasClass("maximize")||(Q.addClass("moving"),R=Q.position(),U.x=e.clientX,U.y=e.clientY,$(document).mousemove(function(e){var r=e.clientX-U.x,t=e.clientY-U.y;R.left+=r,R.top+=t,U.x=e.clientX,U.y=e.clientY,Q.css(R)}),$(document).mouseup(function(){Q.removeClass("moving"),$(document).off("mousemove"),$(document).off("mouseup")})))}),d.mousedown(function(e){e.stopPropagation()}),[[".border-left","left","width","x","clientX"],[".border-top","top","height","y","clientY"],[".border-right",null,"width","x","clientX"],[".border-bottom",null,"height","y","clientY"]].map(function(r){var t=_slicedToArray(r,5),a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],c=null,l={},d={};e.find(".border-container").find(a).mousedown(function(e){if(1===e.which&&!(c=$(this).parents(".window")).hasClass("maximize")){if(c.addClass("resizing"),n){var r=c.position();l[n]=r[n]}l[o]=c[o](),d[i]=e[s],$(document).mousemove(function(e){var r=e[s]-d[i];n?(l[n]+=r,l[o]-=r):l[o]+=r,d[i]=e[s],l.width<280||l.height<60||c.css(l)}),$(document).mouseup(function(){c.removeClass("resizing"),$(document).off("mousemove"),$(document).off("mouseup")})}})});var Z=function(){var e=function(e){return e<10?"0"+e:e},r=new Date,t=r.getHours(),a=r.getMinutes(),n=e(t%12||12)+":"+e(a)+" "+["AM","PM"][t/12|0];l.find(".name").text(n)};window.setInterval(Z,1e3),Z(),d.each(function(){$(this).attr("href").startsWith("#")||$(this).attr("target","_blank")});var ee=function(){var e=document.body.clientWidth>960,r=!e;c.toggleClass("desktop",e),c.toggleClass("mobile",r)};ee(),window.onresize=ee});